(this["webpackJsonpstyled-cra"]=this["webpackJsonpstyled-cra"]||[]).push([[0],{782:function(e,t,n){"use strict";n.r(t);n(431),n(440),n(328);var a,c,r,o=n(0),i=n(199),l=n.n(i),s=n(67),b=n(813),j=n(73),u=n.p+"static/media/bg@2x.48842758.png",d=Object(s.b)(a||(a=Object(j.a)(["\n@import url('https://fonts.googleapis.com/css2?family=Barlow:wght@600;700&family=Noto+Sans+TC:wght@500;700;900&display=swap');\n\n  body {\n    min-width: 100%;\n    min-height: 100%;\n  }\n\n  img {\n    width: 100%;\n  }\n\n  #root {\n    background-image: url(",");\n    background-size: cover;\n    background-position: 50% 0;\n  }\n"])),u),h=n(14),O=n(5),f=n(207),m=n(797),g=n(796),x=n(400),p=n(31),y=n.n(p),v=Object(g.a)({sm:"30em",md:"48em",lg:"60em",xl:"80em","2xl":"96em"}),w=Object.values(v).slice(1),C=[[1,"mobile"],[2,"tablet"],[3,"laptop"],[4,"desktop"]],B=w.map((function(e,t){var n=C.findIndex((function(e){return Object(O.a)(e,1)[0]>t}));return n>=0?n:C.length})),A=Object(x.a)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.length;return a<=1?t[0]:w.map((function(e,n){return y()(t,[B[n]],null)}))})),S=[null,"48em","60em","80em"],k=A("1em","2em"),F='Barlow, "Noto Sans TC", "PingFang TC", "HeiTi TC", "Microsoft JhengHei", sans-serif',R={fonts:{heading:F,body:F,mono:"Menlo, monospace"},colors:Object(h.a)(Object(h.a)({},f.theme.colors),{},{primary:y()(f.theme.colors,"".concat("blue",".500")),secondary:y()(f.theme.colors,"".concat("green",".500")),danger:y()(f.theme.colors,"".concat("red",".500")),text:y()(f.theme.colors,"black"),custom:{gray:"#B1B1B2",darkBlue:"#094063",textOrange:"#E09200",textBlue:"#005678",orange:"#FFA323",yellow:"#FFD31F",orangeAlpha:"RGBA(255, 163, 35, 0.5)",yellowAlpha:"RGBA(255, 211, 31, 0.5)",lightCyan:"#8FD9D5",cyan:"#5EABA7",lightBlue:"#5798C5",labelBlue:"#00729F",blue:"#3380B5",darkGreen:"#2F857E",treeMapGreen:{100:"#A7E6E3",200:"#8FD9D5",300:"#7CCCC7",400:"#6FBFB9",500:"#62B3AE",600:"#53A6A2",700:"#449995",800:"#2F857E",900:"#2F857E",1e3:"#2F857E"},treeMapBlue:{100:"#CDE7FA",200:"#B2DAF7",300:"#92C9F0",400:"#76BCE8",500:"#5BA7D9",600:"#3A8EBF",700:"#2B77AD",800:"#0D5A8C"}}}),breakpoints:w,containerWidth:S,headerHeight:"5em"},z=Object(m.a)(R),E=n(3),T=function(e){var t=e.children;return Object(E.jsx)(b.a,{theme:z,resetCSS:!0,children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(s.a,{styles:d}),t]})})},D=Object(o.createContext)({}),L=n(402),G=function(e){return Object(L.useMediaQuery)({query:"(min-width: ".concat(e,")")})},I=function(e){var t=e.children,n=w.map(G);return Object(E.jsx)(D.Provider,{value:n,children:t})},M=n(50),P={headTitle:"\u6b72\u5165\u6b72\u51fa\u5206\u6790",updatedAt:"\u8cc7\u6599\u66f4\u65b0\u65e5\u671f",budgetTitle:"\u9810\u7b97\u6578",revenueTitle:"\u6b72\u5165\u4f86\u6e90\u5225\u79d1\u76ee\u5206\u6790",spendingTitle:"\u6b72\u51fa\u5927\u653f\u4e8b\u5225\u79d1\u76ee\u5206\u6790"},W=Object(o.createContext)(P),K=function(e){var t=e.children,n=Object(M.b)("/labels").data,a=void 0===n?P:n;return Object(E.jsx)(W.Provider,{value:a,children:t})},H=function(e){var t=e.children,n=e.options;return Object(E.jsx)(M.a,{value:Object(h.a)({fetcher:function(e,t){return fetch("https://cbadcmst.dgbas.gov.tw/GTFL/api"+e,t).then((function(e){return e.json()}))}},n),children:Object(E.jsx)(K,{children:t})})},N=n(815),Y=n(75),J=n(798),_=Object(Y.a)(J.a)(c||(c=Object(j.a)([""]))),V=_;_.Inline=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_,Object(h.a)(Object(h.a)({as:"span",display:"inline-block",verticalAlign:"middle"},e),{},{ref:t}))})),_.Absolute=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_,Object(h.a)(Object(h.a)({position:"absolute"},e),{},{ref:t}))})),_.AbsCenter=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_,Object(h.a)(Object(h.a)({position:"absolute",top:"50%",left:"50%",transform:"transform(-50%, -50%)"},e),{},{ref:t}))})),_.FullAbs=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_.Absolute,Object(h.a)(Object(h.a)({top:"0",left:"0",right:"0",bottom:"0"},e),{},{ref:t}))})),_.Relative=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_,Object(h.a)(Object(h.a)({position:"relative"},e),{},{ref:t}))})),_.Fixed=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_,Object(h.a)(Object(h.a)({position:"fixed"},e),{},{ref:t}))})),_.Invisible=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(_.Absolute,Object(h.a)(Object(h.a)({width:"0",height:"0",overflow:"hidden",opacity:"0"},e),{},{ref:t}))}));var q=Object(Y.a)(V)(r||(r=Object(j.a)([""])));q.defaultProps={mx:"auto",px:k,maxWidth:S},q.displayName="Container";var Q,U=q,X=n(799),Z=Object(Y.a)(X.a)(Q||(Q=Object(j.a)([""])));Z.Vertical=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(X.a,Object(h.a)(Object(h.a)({direction:"column"},e),{},{ref:t}))}));var $,ee=Z,te=n(800),ne=n(104),ae=n.n(ne),ce=Object(Y.a)(te.a)($||($=Object(j.a)([""])));ce.Inline=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(ce,Object(h.a)(Object(h.a)({as:"span"},e),{},{ref:t}))})),ce.Bold=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(ce,Object(h.a)(Object(h.a)({fontWeight:"700"},e),{},{ref:t}))})),ce.Thin=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(ce,Object(h.a)(Object(h.a)({fontWeight:"200"},e),{},{ref:t}))})),ae()(1,7).forEach((function(e){ce["H".concat(e)]=Object(o.forwardRef)((function(t,n){return Object(E.jsx)(ce,Object(h.a)(Object(h.a)({as:"h".concat(e),fontSize:"".concat(5-e,"xl")},t),{},{ref:n}))}))}));var re=ce,oe=n(121),ie=n(87),le=n(801),se=function(e){var t=Object(ie.get)(window,"Modernizr.webp");return Object(o.useMemo)((function(){return Object(ie.isArray)(e)?t?e[0]:e[1]:null}),[t,e])},be=function(e){var t=e.src,n=e.children,a=Object(oe.a)(e,["src","children"]),c=se(t);return Object(E.jsx)(V,Object(h.a)(Object(h.a)({backgroundImage:"url(".concat(Object(ie.isArray)(t)?c:t,")")},a),{},{children:n&&Object(E.jsx)(V.FullAbs,{children:n})}))};be.defaultProps={backgroundSize:"cover",backgroundPosition:"50% 50%",backgroundRepet:"no-repeat"};var je=Object(o.forwardRef)((function(e,t){var n=e.src,a=e.children,c=e.backgroundSize,r=e.backgroundPosition,o=Object(oe.a)(e,["src","children","backgroundSize","backgroundPosition"]);return Object(E.jsx)(le.a,Object(h.a)(Object(h.a)({},o),{},{ref:t,children:Object(E.jsx)(be,{src:n,backgroundSize:c,backgroundPosition:r,children:a})}))}));je.displayName="BackgroundImage";var ue=je,de=n(804),he=function(e){var t=Object(o.useContext)(W);return e?t[e]:t},Oe=function(){var e=Object(M.b)("/lastUpdated").data,t=he("updatedAt");return Object(E.jsxs)(N.a,{color:"custom.darkBlue",fontSize:"0.875em",children:[Object(E.jsxs)(te.a,{fontWeight:"500",children:[t,":"]}),Object(E.jsx)(te.a,{fontWeight:"500",children:(null===e||void 0===e?void 0:e.date)||""})]})},fe=function(e){var t=e.value,n=e.onChange,a=e.options;return Object(E.jsxs)(X.a,{position:"relative",rounded:"full",bg:"white",boxShadow:"inner",width:"10em",fontSize:"1.125em",children:[Object(E.jsx)(J.a,{position:"absolute",transition:"all 500ms",bgGradient:"linear(to-r, custom.orange, custom.yellow)",width:"52.5%",height:"120%",left:"0",top:"0",transform:"translate(".concat(t?90:-2.5,"%, -10%)"),rounded:"full",boxShadow:"md"}),a.map((function(e,a){return Object(E.jsx)(J.a,{width:"100%",px:"0.5em",py:"0.25em",color:t===a?"black":"custom.gray",fontWeight:t===a?700:500,position:"relative",transition:"all 500ms",letterSpacing:"widest",textAlign:"center",onClick:function(){return n(a)},cursor:"pointer",children:e},a)}))]})},me=n(816),ge=n(814),xe=n(287),pe=n(810),ye=function(e){return Object(E.jsx)(me.a,Object(h.a)({variant:"unstyled",rounded:"full",bgGradient:"linear(to-r, custom.orange, custom.yellow)",bgColor:"white",color:"white",boxShadow:"md",fontSize:"1.75em",width:"1.125em",minW:"1.125em",height:"1.125em",display:"flex",px:"0.25em",py:"0.25em",_disabled:{bgGradient:"linear(to-r, custom.orangeAlpha, custom.yellowAlpha)",opacity:1,cursor:"not-allowed"},_hover:{opacity:1}},e))},ve=function(e){var t=e.onChange,n=Object(M.b)("/yearsList").data,a=void 0===n?[]:n,c=Object(o.useCallback)((function(e){t(a[a.length-1-e])}),[a,t]),r=Object(pe.a)({step:1,defaultValue:0,min:0,max:Math.max(0,a.length-1),onChange:c}),i=r.getInputProps,l=r.getIncrementButtonProps,s=r.getDecrementButtonProps,b=l(),j=s(),u=i({isReadOnly:!0});return Object(E.jsxs)(J.a,{position:"relative",width:"7em",bg:"white",rounded:"full",border:"2xp solid white",boxShadow:"inner",children:[Object(E.jsx)(ge.a,{width:"100%",textAlign:"center",variant:"unstyled",py:"0.125em",fontSize:"1.25em",letterSpacing:"wider",value:a[a.length-1-u.value],isReadOnly:!0}),Object(E.jsx)(J.a,{position:"absolute",left:"-0.75em",top:"50%",transform:"translate(0, -50%)",children:Object(E.jsx)(ye,Object(h.a)({icon:Object(E.jsx)(xe.a,{})},b))}),Object(E.jsx)(J.a,{position:"absolute",right:"-0.75em",top:"50%",transform:"translate(0, -50%)",children:Object(E.jsx)(ye,Object(h.a)({icon:Object(E.jsx)(xe.b,{})},j))})]})},we=function(e){var t=e.type,n=e.typeLabel,a=e.onTypeChange,c=e.typeOptions,r=e.year,o=e.onYearChange,i=Object(oe.a)(e,["type","typeLabel","onTypeChange","typeOptions","year","onYearChange"]),l=he("headTitle");return Object(E.jsxs)(X.a,Object(h.a)(Object(h.a)({alignItems:"flex-end",borderBottom:"1px solid white",pb:"1.5em"},i),{},{children:[Object(E.jsxs)(N.a,{flex:1,spacing:"1.5em",children:[Object(E.jsxs)(de.a,{as:"h1",color:"white",letterSpacing:"widest",fontSize:"1.75em",minW:"".concat(l.length+5,"em"),children:["\u5404",n,l]}),Object(E.jsx)(ve,{value:r,onChange:o}),Object(E.jsx)(fe,{value:t,options:c,onChange:a})]}),Object(E.jsx)(Oe,{})]}))},Ce=n(85),Be=n(805),Ae=n(416),Se=n(417),ke=n(422),Fe=n(415),Re=n(811),ze=n.p+"static/media/arrow.fa88aa12.svg",Ee=function(e){var t=e.title,n=e.hightlight,a=e.titleRight,c=e.children,r=Object(oe.a)(e,["title","hightlight","titleRight","children"]);return Object(E.jsxs)(J.a,Object(h.a)(Object(h.a)({rounded:"2em",p:"2em",boxShadow:"lg",bg:"white"},r),{},{children:[Object(E.jsxs)(N.a,{pb:"1em",mb:"1.5em",position:"relative",spacing:"0.625em",_before:{content:'""',display:"block",position:"absolute",left:0,right:0,bottom:0,height:"1px",bgImage:"linear-gradient(to right, #238CC5, #B7A5D1)"},children:[Object(E.jsx)(ue,{width:"1.375em",ratio:1,src:ze}),Object(E.jsxs)(de.a,{color:"custom.textBlue",fontSize:"1.5em",letterSpacing:"widest",children:[n&&Object(E.jsx)(te.a,{mr:"0.25em",as:"span",color:"custom.textOrange",children:n}),t]}),Object(E.jsx)(J.a,{flex:"1"}),a]}),c]}))},Te=n(818),De=[{label:"\u6b72\u5165",bg:"custom.lightCyan"},{label:"\u6b72\u51fa",bg:"custom.lightBlue"}],Le=18,Ge=Object(Re.a)(",d"),Ie=function(e){var t=e.x,n=e.y,a=e.payload,c=e.width,r=38.25;return Object(E.jsxs)("g",{transform:"translate(".concat(t-c-24.75,", ").concat(n-20.25,")"),children:[Object(E.jsx)(Ce.a,{radius:8,width:81,height:r,fill:"url(#Gradient1)",opacity:"0.175"}),Object(E.jsx)(Ce.a,{radius:8,width:81,height:r,fill:"none",stroke:z.colors.custom.textBlue}),Object(E.jsx)("text",{x:40.5,y:25.425,fontSize:Le,fill:z.colors.custom.textBlue,textAnchor:"middle",children:a.value})]})},Me=function(e){var t=e.type,n=e.year,a=e.typeLabel,c=he("budgetTitle"),r=Object(M.b)("/data/cities?year=".concat(n,"&type=").concat(t)).data,i=Object(o.useMemo)((function(){return r?r.map((function(e){var t=e.name,n=e.revenue;return{name:t,"\u6b72\u51fa":e.spending,"\u6b72\u5165":n}})):[]}),[r]);return Object(E.jsx)(Ee,{title:"\u5404".concat(a).concat(c),width:"100%",titleRight:Object(E.jsx)(ee,{children:De.map((function(e,t){var n=e.label,a=e.bg;return Object(E.jsxs)(ee,{alignItems:"center",ml:t&&"1.5em",children:[Object(E.jsx)(V,{mr:"0.375em",width:"2.5em",py:"0.5em",bg:a}),Object(E.jsx)(re,{color:"custom.labelBlue",children:n})]},t)}))}),children:r?Object(E.jsxs)(Be.a,{layout:"vertical",width:500,height:1350,min:0,barGap:0,data:i,margin:{top:0,right:20,left:36,bottom:0},children:[Object(E.jsx)("defs",{children:Object(E.jsxs)("linearGradient",{id:"Gradient1",x1:"0",x2:"0",y1:"0",y2:"1",children:[Object(E.jsx)("stop",{class:"stop1",offset:"0%","stop-color":"rgba(0,114,159,0)"}),Object(E.jsx)("stop",{class:"stop2",offset:"100%","stop-color":"rgba(0,114,159,1)"})]})}),Object(E.jsx)(Ae.a,{type:"number",tick:!1,tickLine:!1,axisLine:!1,strokeWidth:0,padding:{right:240}}),Object(E.jsx)(Se.a,{tickLine:!1,axisLine:!1,dataKey:"name",type:"category",tick:Object(E.jsx)(Ie,{})}),Object(E.jsx)(ke.a,{dataKey:"\u6b72\u5165",barSize:25,fill:z.colors.custom.lightCyan,children:Object(E.jsx)(Fe.a,{dataKey:"\u6b72\u5165",position:"right",fill:z.colors.custom.cyan,formatter:Ge})}),Object(E.jsx)(ke.a,{dataKey:"\u6b72\u51fa",barSize:25,fill:z.colors.custom.lightBlue,children:Object(E.jsx)(Fe.a,{dataKey:"\u6b72\u51fa",position:"right",fill:z.colors.custom.blue,formatter:Ge})})]}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},Pe=n(817),We=n(89),Ke=n(809),He=Object(Re.a)(",d"),Ne=function(e){var t=e.active,n=e.payload,a=(e.label,e.valueColor);return t&&n&&n.length?Object(E.jsxs)(V,{bg:"rgba(255, 255, 255, 0.9)",borderRadius:"0.5em",p:"0.25em 0.5em",children:[Object(E.jsx)(re,{fontSize:"1.125em",children:n[0].payload.name}),Object(E.jsx)(re,{fontSize:"1.625em",color:"custom.".concat(a),children:"".concat(He(n[0].value))})]}):null},Ye=function(e){var t=e.depth,n=e.x,a=e.y,c=e.width,r=e.height,o=e.name,i=e.colorScale,l=e.value;return Object(E.jsxs)("g",{children:[Object(E.jsx)("rect",{x:n,y:a,width:c,height:r,style:{fill:i(l),stroke:"#fff",strokeWidth:2}}),1===t?Object(E.jsx)("text",{x:n+c/2,y:a+r/2+7,textAnchor:"middle",fill:"#fff",fontSize:18,children:c<20*o.length?"...":o}):null]})},Je={green:["#A7E6E3","#2F857E"],blue:["#CDE7FA","#0D5A8C"]},_e=function(e){var t=e.data,n=e.colorScheme,a=e.valueColor,c=Object(o.useMemo)((function(){return t?Object(ie.sortBy)(t.map((function(e){return{name:e.name,value:+e.value}})),["value"]).reverse():[]}),[t]),r=Object(o.useMemo)((function(){var e=Object(ie.minBy)(c,"value"),t=Object(ie.maxBy)(c,"value");return[(null===e||void 0===e?void 0:e.value)||0,(null===t||void 0===t?void 0:t.value)||1]}),[c]),i=Object(o.useMemo)((function(){return Object(Ke.a)().domain(r).range(Je[n])}),[r,n]);return Object(E.jsx)(Pe.a,{width:530,height:600,data:c,ratio:4/3,dataKey:"value",animationDuration:500,content:Object(E.jsx)(Ye,{colorScale:i}),children:Object(E.jsx)(We.a,{valueColor:a,content:Object(E.jsx)(Ne,{})})})},Ve=function(e){var t=e.type,n=e.year,a=e.typeLabel,c=he("revenueTitle"),r=Object(M.b)("/data/revenue?year=".concat(n,"&type=").concat(t)).data;return Object(E.jsx)(Ee,{title:c,hightlight:"\u5168".concat(a),children:r?Object(E.jsx)(_e,{data:r,colorScheme:"green",valueColor:"darkGreen"}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},qe=function(e){var t=e.type,n=e.year,a=e.typeLabel,c=he("spendingTitle"),r=Object(M.b)("/data/spending?year=".concat(n,"&type=").concat(t)).data;return Object(E.jsx)(Ee,{title:c,hightlight:"\u5168".concat(a),children:r?Object(E.jsx)(_e,{data:r,colorScheme:"blue",valueColor:"darkBlue"}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},Qe=["\u5e02\u7e23","\u9109\u93ae\u5e02"],Ue=function(){var e=Object(o.useState)(0),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)((function(){return(new Date).getFullYear()-1911})),r=Object(O.a)(c,2),i=r[0],l=r[1],s=n?"B":"A",b=Qe[+n];return Object(E.jsxs)(U,{py:"2em",children:[Object(E.jsx)(we,{typeLabel:b,type:n,onTypeChange:a,typeOptions:Qe,year:i,onYearChange:l}),Object(E.jsxs)(N.a,{spacing:"2em",my:"3em",alignItems:"flex-start",children:[Object(E.jsx)(V,{flex:"1",children:Object(E.jsx)(Me,{type:s,typeLabel:b,year:i})}),Object(E.jsxs)(N.b,{spacing:"1em",flex:"1",children:[Object(E.jsx)(Ve,{type:s,typeLabel:b,year:i}),Object(E.jsx)(qe,{type:s,typeLabel:b,year:i})]})]})]})};var Xe=function(){return Object(E.jsx)(Ue,{})};l.a.render(Object(E.jsx)(T,{children:Object(E.jsx)(I,{children:Object(E.jsx)(H,{children:Object(E.jsx)(Xe,{})})})}),document.getElementById("root"))}},[[782,1,2]]]);
//# sourceMappingURL=main.eb3020c6.chunk.js.map
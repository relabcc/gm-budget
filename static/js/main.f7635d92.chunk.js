(this["webpackJsonpstyled-cra"]=this["webpackJsonpstyled-cra"]||[]).push([[0],{781:function(e,t,n){"use strict";n.r(t);n(430),n(439),n(325);var c,a,r,o=n(0),i=n(196),l=n.n(i),s=n(67),b=n(811),j=n(74),u=n.p+"static/media/bg@2x.48842758.png",d=Object(s.b)(c||(c=Object(j.a)(["\n@import url('https://fonts.googleapis.com/css2?family=Barlow:wght@600;700&family=Noto+Sans+TC:wght@500;700;900&display=swap');\n\n  body {\n    min-width: 100%;\n    min-height: 100%;\n  }\n\n  img {\n    width: 100%;\n  }\n\n  #root {\n    background-image: url(",");\n    background-size: cover;\n    background-position: 50% 0;\n    overflow: hidden;\n  }\n"])),u),h=n(14),O=n(9),f=n(205),m=n(795),g=n(794),x=n(398),p=n(33),y=n.n(p),v=Object(g.a)({sm:"30em",md:"48em",lg:"60em",xl:"80em","2xl":"96em"}),w=Object.values(v).slice(1),C=[[1,"mobile"],[2,"tablet"],[3,"laptop"],[4,"desktop"]],S=w.map((function(e,t){var n=C.findIndex((function(e){return Object(O.a)(e,1)[0]>t}));return n>=0?n:C.length})),k=Object(x.a)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var c=t.length;return c<=1?t[0]:w.map((function(e,n){return y()(t,[S[n]],null)}))})),B=[null,"48em","60em","80em"],A=k("1em","2em"),F='Barlow, "Noto Sans TC", "PingFang TC", "HeiTi TC", "Microsoft JhengHei", sans-serif',R={fonts:{heading:F,body:F,mono:"Menlo, monospace"},colors:Object(h.a)(Object(h.a)({},f.theme.colors),{},{primary:y()(f.theme.colors,"".concat("blue",".500")),secondary:y()(f.theme.colors,"".concat("green",".500")),danger:y()(f.theme.colors,"".concat("red",".500")),text:y()(f.theme.colors,"black"),custom:{gray:"#B1B1B2",darkBlue:"#094063",textOrange:"#E09200",textBlue:"#005678",orange:"#FFA323",yellow:"#FFD31F",orangeAlpha:"RGBA(255, 163, 35, 0.5)",yellowAlpha:"RGBA(255, 211, 31, 0.5)",lightCyan:"#8FD9D5",cyan:"#5EABA7",lightBlue:"#5798C5",labelBlue:"#00729F",blue:"#3380B5",darkGreen:"#2F857E",treeMapGreen:{100:"#A7E6E3",200:"#8FD9D5",300:"#7CCCC7",400:"#6FBFB9",500:"#62B3AE",600:"#53A6A2",700:"#449995",800:"#2F857E",900:"#2F857E",1e3:"#2F857E"},treeMapBlue:{100:"#CDE7FA",200:"#B2DAF7",300:"#92C9F0",400:"#76BCE8",500:"#5BA7D9",600:"#3A8EBF",700:"#2B77AD",800:"#0D5A8C"}}}),breakpoints:w,containerWidth:B,headerHeight:"5em"},z=Object(m.a)(R),E=n(3),T=function(e){var t=e.children;return Object(E.jsx)(b.a,{theme:z,resetCSS:!0,children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(s.a,{styles:d}),t]})})},D=Object(o.createContext)({}),L=n(401),I=function(e){return Object(L.useMediaQuery)({query:"(min-width: ".concat(e,")")})},G=function(e){var t=e.children,n=w.map(I);return Object(E.jsx)(D.Provider,{value:n,children:t})},M=n(52),P={headTitle:"\u6b72\u5165\u6b72\u51fa\u5206\u6790",updatedAt:"\u8cc7\u6599\u66f4\u65b0\u65e5\u671f",budgetTitle:"\u9810\u7b97\u6578",revenueTitle:"\u6b72\u5165\u4f86\u6e90\u5225\u79d1\u76ee\u5206\u6790",spendingTitle:"\u6b72\u51fa\u5927\u653f\u4e8b\u5225\u79d1\u76ee\u5206\u6790"},W=Object(o.createContext)(P),K=function(e){var t=e.children,n=Object(M.b)("/labels").data,c=void 0===n?P:n;return Object(E.jsx)(W.Provider,{value:c,children:t})},H=function(e){var t=e.children,n=e.options;return Object(E.jsx)(M.a,{value:Object(h.a)({fetcher:function(e,t){return fetch("https://cbadcmst.dgbas.gov.tw/GTFL/api"+e,t).then((function(e){return e.json()}))}},n),children:Object(E.jsx)(K,{children:t})})},N=n(798),Y=n(814),J=n(75),_=n(796),V=Object(J.a)(_.a)(a||(a=Object(j.a)([""]))),q=V;V.Inline=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V,Object(h.a)(Object(h.a)({as:"span",display:"inline-block",verticalAlign:"middle"},e),{},{ref:t}))})),V.Absolute=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V,Object(h.a)(Object(h.a)({position:"absolute"},e),{},{ref:t}))})),V.AbsCenter=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V,Object(h.a)(Object(h.a)({position:"absolute",top:"50%",left:"50%",transform:"transform(-50%, -50%)"},e),{},{ref:t}))})),V.FullAbs=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V.Absolute,Object(h.a)(Object(h.a)({top:"0",left:"0",right:"0",bottom:"0"},e),{},{ref:t}))})),V.Relative=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V,Object(h.a)(Object(h.a)({position:"relative"},e),{},{ref:t}))})),V.Fixed=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V,Object(h.a)(Object(h.a)({position:"fixed"},e),{},{ref:t}))})),V.Invisible=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(V.Absolute,Object(h.a)(Object(h.a)({width:"0",height:"0",overflow:"hidden",opacity:"0"},e),{},{ref:t}))}));var Q=Object(J.a)(q)(r||(r=Object(j.a)([""])));Q.defaultProps={mx:"auto",px:A,maxWidth:B},Q.displayName="Container";var U,X=Q,Z=n(119),$=n(801),ee=n(797),te=function(e){var t=Object(o.useContext)(W);return e?t[e]:t},ne=function(){var e=Object(M.b)("/lastUpdated").data,t=te("updatedAt");return Object(E.jsxs)(Y.a,{color:"custom.darkBlue",fontSize:"0.875em",children:[Object(E.jsxs)(ee.a,{fontWeight:"500",children:[t,":"]}),Object(E.jsx)(ee.a,{fontWeight:"500",children:(null===e||void 0===e?void 0:e.date)||""})]})},ce=function(e){var t=e.value,n=e.onChange,c=e.options;return Object(E.jsxs)(N.a,{position:"relative",rounded:"full",bg:"white",boxShadow:"inner",width:"10em",fontSize:"1.125em",children:[Object(E.jsx)(_.a,{position:"absolute",transition:"all 500ms",bgGradient:"linear(to-r, custom.orange, custom.yellow)",width:"52.5%",height:"120%",left:"0",top:"0",transform:"translate(".concat(t?90:-2.5,"%, -10%)"),rounded:"full",boxShadow:"md"}),c.map((function(e,c){return Object(E.jsx)(_.a,{width:"100%",px:"0.5em",py:"0.25em",color:t===c?"black":"custom.gray",fontWeight:t===c?700:500,position:"relative",transition:"all 500ms",letterSpacing:"widest",textAlign:"center",onClick:function(){return n(c)},cursor:"pointer",children:e},c)}))]})},ae=n(812),re=n(800),oe=n(283),ie=n(808),le=function(e){return Object(E.jsx)(ae.a,Object(h.a)({variant:"unstyled",rounded:"full",bgGradient:"linear(to-r, custom.orange, custom.yellow)",bgColor:"white",color:"white",boxShadow:"md",fontSize:"1.75em",width:"1.125em",minW:"1.125em",height:"1.125em",display:"flex",px:"0.25em",py:"0.25em",_disabled:{bgGradient:"linear(to-r, custom.orangeAlpha, custom.yellowAlpha)",opacity:1,cursor:"not-allowed"},_hover:{opacity:1}},e))},se=function(e){var t=e.onChange,n=Object(M.b)("/yearsList").data,c=void 0===n?[]:n,a=Object(o.useCallback)((function(e){t(c[c.length-1-e])}),[c,t]),r=Object(ie.a)({step:1,defaultValue:0,min:0,max:Math.max(0,c.length-1),onChange:a}),i=r.getInputProps,l=r.getIncrementButtonProps,s=r.getDecrementButtonProps,b=l(),j=s(),u=i({isReadOnly:!0});return Object(E.jsxs)(_.a,{position:"relative",width:"7em",bg:"white",rounded:"full",border:"2xp solid white",boxShadow:"inner",children:[Object(E.jsx)(re.a,{width:"100%",textAlign:"center",variant:"unstyled",py:"0.125em",fontSize:"1.25em",letterSpacing:"wider",value:c[c.length-1-u.value],isReadOnly:!0}),Object(E.jsx)(_.a,{position:"absolute",left:"-0.75em",top:"50%",transform:"translate(0, -50%)",children:Object(E.jsx)(le,Object(h.a)({icon:Object(E.jsx)(oe.a,{})},b))}),Object(E.jsx)(_.a,{position:"absolute",right:"-0.75em",top:"50%",transform:"translate(0, -50%)",children:Object(E.jsx)(le,Object(h.a)({icon:Object(E.jsx)(oe.b,{})},j))})]})},be=function(e){var t=e.type,n=e.typeLabel,c=e.onTypeChange,a=e.typeOptions,r=e.year,o=e.onYearChange,i=Object(Z.a)(e,["type","typeLabel","onTypeChange","typeOptions","year","onYearChange"]),l=te("headTitle");return Object(E.jsxs)(N.a,Object(h.a)(Object(h.a)({alignItems:"flex-end",borderBottom:"1px solid white",pb:"1.5em"},i),{},{children:[Object(E.jsxs)(N.a,{flex:1,alignItems:"center",children:[Object(E.jsxs)($.a,{as:"h1",color:"white",letterSpacing:"widest",fontSize:"1.75em",minW:"".concat(l.length+5,"em"),children:["\u5404",n,l]}),Object(E.jsx)(_.a,{mx:"1.5em",children:Object(E.jsx)(se,{value:r,onChange:o})}),Object(E.jsx)(ce,{value:t,options:a,onChange:c})]}),Object(E.jsx)(ne,{})]}))},je=n(84),ue=n(803),de=n(415),he=n(416),Oe=n(421),fe=n(414),me=n(809),ge=n(100),xe=n.n(ge),pe=Object(J.a)(ee.a)(U||(U=Object(j.a)([""])));pe.Inline=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(pe,Object(h.a)(Object(h.a)({as:"span"},e),{},{ref:t}))})),pe.Bold=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(pe,Object(h.a)(Object(h.a)({fontWeight:"700"},e),{},{ref:t}))})),pe.Thin=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(pe,Object(h.a)(Object(h.a)({fontWeight:"200"},e),{},{ref:t}))})),xe()(1,7).forEach((function(e){pe["H".concat(e)]=Object(o.forwardRef)((function(t,n){return Object(E.jsx)(pe,Object(h.a)(Object(h.a)({as:"h".concat(e),fontSize:"".concat(5-e,"xl")},t),{},{ref:n}))}))}));var ye,ve=pe,we=Object(J.a)(N.a)(ye||(ye=Object(j.a)([""])));we.Vertical=Object(o.forwardRef)((function(e,t){return Object(E.jsx)(N.a,Object(h.a)(Object(h.a)({direction:"column"},e),{},{ref:t}))}));var Ce=we,Se=n(79),ke=n(802),Be=function(e){var t=Object(Se.get)(window,"Modernizr.webp");return Object(o.useMemo)((function(){return Object(Se.isArray)(e)?t?e[0]:e[1]:null}),[t,e])},Ae=function(e){var t=e.src,n=e.children,c=Object(Z.a)(e,["src","children"]),a=Be(t);return Object(E.jsx)(q,Object(h.a)(Object(h.a)({backgroundImage:"url(".concat(Object(Se.isArray)(t)?a:t,")")},c),{},{children:n&&Object(E.jsx)(q.FullAbs,{children:n})}))};Ae.defaultProps={backgroundSize:"cover",backgroundPosition:"50% 50%",backgroundRepet:"no-repeat"};var Fe=Object(o.forwardRef)((function(e,t){var n=e.src,c=e.children,a=e.backgroundSize,r=e.backgroundPosition,o=Object(Z.a)(e,["src","children","backgroundSize","backgroundPosition"]);return Object(E.jsx)(ke.a,Object(h.a)(Object(h.a)({},o),{},{ref:t,children:Object(E.jsx)(Ae,{src:n,backgroundSize:a,backgroundPosition:r,children:c})}))}));Fe.displayName="BackgroundImage";var Re=Fe,ze=n.p+"static/media/arrow.fa88aa12.svg",Ee=function(e){var t=e.title,n=e.hightlight,c=e.titleRight,a=e.children,r=Object(Z.a)(e,["title","hightlight","titleRight","children"]);return Object(E.jsxs)(_.a,Object(h.a)(Object(h.a)({rounded:"2em",p:"2em",boxShadow:"lg",bg:"white"},r),{},{children:[Object(E.jsxs)(Y.a,{pb:"1em",mb:"1.5em",position:"relative",spacing:"0.625em",_before:{content:'""',display:"block",position:"absolute",left:0,right:0,bottom:0,height:"1px",bgImage:"linear-gradient(to right, #238CC5, #B7A5D1)"},children:[Object(E.jsx)(Re,{width:"1.375em",ratio:1,src:ze}),Object(E.jsxs)($.a,{color:"custom.textBlue",fontSize:"1.5em",letterSpacing:"widest",children:[n&&Object(E.jsx)(ee.a,{mr:"0.25em",as:"span",color:"custom.textOrange",children:n}),t]}),Object(E.jsx)(_.a,{flex:"1"}),c]}),a]}))},Te=n(815),De=[{label:"\u6b72\u5165",bg:"custom.lightCyan"},{label:"\u6b72\u51fa",bg:"custom.lightBlue"}],Le=18,Ie=Object(me.a)(",d"),Ge=function(e){var t=e.x,n=e.y,c=e.payload,a=e.width,r=e.onClick,o=e.index,i=e.city,l=38.25,s=!i||i[2]===o;return Object(E.jsxs)("g",{transform:"translate(".concat(t-a-24.75,", ").concat(n-20.25,")"),onClick:function(){return r(o)},style:{cursor:"pointer",opacity:s?1:.33},children:[Object(E.jsx)(je.a,{radius:8,width:81,height:l,fill:"url(#Gradient1)",opacity:"0.175"}),Object(E.jsx)(je.a,{radius:8,width:81,height:l,fill:"none",stroke:z.colors.custom.textBlue}),Object(E.jsx)("text",{x:40.5,y:25.425,fontSize:Le,fill:z.colors.custom.textBlue,textAnchor:"middle",children:c.value})]})},Me=function(e){var t=e.type,n=e.year,c=e.typeLabel,a=e.city,r=e.onSetCity,i=te("budgetTitle"),l=Object(M.b)("/data/cities?year=".concat(n,"&type=").concat(t)).data,s=Object(o.useMemo)((function(){return l?l.map((function(e){var t=e.name,n=e.revenue;return{name:t,"\u6b72\u51fa":e.spending,"\u6b72\u5165":n}})):[]}),[l]),b=Object(o.useCallback)((function(e){var t=l[e].id;r((null===a||void 0===a?void 0:a[0])===t?null:[t,l[e].name,e])}),[l,r,a]);return Object(E.jsx)(Ee,{title:"\u5404".concat(c).concat(i),width:"100%",titleRight:Object(E.jsx)(Ce,{children:De.map((function(e,t){var n=e.label,c=e.bg;return Object(E.jsxs)(Ce,{alignItems:"center",ml:t&&"1.5em",children:[Object(E.jsx)(q,{mr:"0.375em",width:"2.5em",py:"0.5em",bg:c}),Object(E.jsx)(ve,{color:"custom.labelBlue",children:n})]},t)}))}),children:l?Object(E.jsxs)(ue.a,{layout:"vertical",width:500,height:1350,min:0,barGap:0,data:s,margin:{top:0,right:20,left:36,bottom:0},children:[Object(E.jsx)("defs",{children:Object(E.jsxs)("linearGradient",{id:"Gradient1",x1:"0",x2:"0",y1:"0",y2:"1",children:[Object(E.jsx)("stop",{offset:"0%",stopColor:"rgba(0,114,159,0)"}),Object(E.jsx)("stop",{offset:"100%",stopColor:"rgba(0,114,159,1)"})]})}),Object(E.jsx)(de.a,{type:"number",tick:!1,tickLine:!1,axisLine:!1,strokeWidth:0,padding:{right:240}}),Object(E.jsx)(he.a,{tickLine:!1,axisLine:!1,dataKey:"name",type:"category",tick:Object(E.jsx)(Ge,{onClick:b,city:a})}),Object(E.jsx)(Oe.a,{dataKey:"\u6b72\u5165",barSize:25,fill:z.colors.custom.lightCyan,children:Object(E.jsx)(fe.a,{dataKey:"\u6b72\u5165",position:"right",fill:z.colors.custom.cyan,formatter:Ie})}),Object(E.jsx)(Oe.a,{dataKey:"\u6b72\u51fa",barSize:25,fill:z.colors.custom.lightBlue,children:Object(E.jsx)(fe.a,{dataKey:"\u6b72\u51fa",position:"right",fill:z.colors.custom.blue,formatter:Ie})})]}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},Pe=n(813),We=n(87),Ke=n(807),He=Object(me.a)(",d"),Ne=function(e){var t=e.active,n=e.payload,c=e.valueColor;return t&&n&&n.length?Object(E.jsxs)(q,{bg:"rgba(255, 255, 255, 0.9)",borderRadius:"0.5em",p:"0.25em 0.5em",children:[Object(E.jsx)(ve,{fontSize:"1.125em",children:n[0].payload.name}),Object(E.jsx)(ve,{fontSize:"1.625em",color:"custom.".concat(c),children:"".concat(He(n[0].value))})]}):null},Ye=function(e){var t=e.depth,n=e.x,c=e.y,a=e.width,r=e.height,o=e.name,i=e.colorScale,l=e.value;return Object(E.jsxs)("g",{children:[Object(E.jsx)("rect",{x:n,y:c,width:a,height:r,style:{fill:i(l||0),stroke:"#fff",strokeWidth:2}}),1===t?Object(E.jsx)("text",{x:n+a/2,y:c+r/2+7,textAnchor:"middle",fill:"#fff",fontSize:18,children:a<20*o.length?"...":o}):null]})},Je={green:["#A7E6E3","#2F857E"],blue:["#CDE7FA","#0D5A8C"]},_e=function(e){var t=e.data,n=e.colorScheme,c=e.valueColor,a=Object(o.useMemo)((function(){return t?Object(Se.sortBy)(Object(Se.map)(t,(function(e){return{name:e.name,value:+e.value}})),["value"]).reverse():[]}),[t]),r=Object(o.useMemo)((function(){var e=Object(Se.minBy)(a,"value"),t=Object(Se.maxBy)(a,"value");return[(null===e||void 0===e?void 0:e.value)||0,(null===t||void 0===t?void 0:t.value)||1]}),[a]),i=Object(o.useMemo)((function(){return Object(Ke.a)().domain(r).range(Je[n])}),[r,n]);return Object(E.jsx)(Pe.a,{width:530,height:600,data:a,ratio:4/3,dataKey:"value",animationDuration:500,content:Object(E.jsx)(Ye,{colorScale:i}),children:Object(E.jsx)(We.a,{valueColor:c,content:Object(E.jsx)(Ne,{})})})},Ve=function(e){var t=e.type,n=e.year,c=e.typeLabel,a=e.city,r=te("revenueTitle"),o=Object(M.b)("/data/revenue?year=".concat(n,"&type=").concat(t).concat(a?"&city=".concat(a[0]):"")).data;return Object(E.jsx)(Ee,{title:r,hightlight:a?a[1]:"\u5168".concat(c),children:o?Object(E.jsx)(_e,{data:o,colorScheme:"green",valueColor:"darkGreen"}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},qe=function(e){var t=e.type,n=e.year,c=e.typeLabel,a=e.city,r=te("spendingTitle"),o=Object(M.b)("/data/spending?year=".concat(n,"&type=").concat(t).concat(a?"&city=".concat(a[0]):"")).data;return Object(E.jsx)(Ee,{title:r,hightlight:a?a[1]:"\u5168".concat(c),children:o?Object(E.jsx)(_e,{data:o,colorScheme:"blue",valueColor:"darkBlue"}):Object(E.jsx)(Te.a,{colorScheme:"green"})})},Qe=["\u5e02\u7e23","\u9109\u93ae\u5e02"],Ue=function(){var e=Object(o.useState)(0),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)((function(){return(new Date).getFullYear()-1911})),r=Object(O.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(),b=Object(O.a)(s,2),j=b[0],u=b[1],d=n?"B":"A",h=Qe[+n];return Object(o.useEffect)((function(){u(null)}),[n]),Object(E.jsxs)(X,{py:"2em",children:[Object(E.jsx)(be,{typeLabel:h,type:n,onTypeChange:c,typeOptions:Qe,year:i,onYearChange:l}),Object(E.jsxs)(N.a,{my:"3em",alignItems:"flex-start",children:[Object(E.jsx)(q,{flex:"1",pr:"1em",children:Object(E.jsx)(Me,{type:d,typeLabel:h,year:i,city:j,onSetCity:u})}),Object(E.jsxs)(Y.b,{spacing:"1em",flex:"1",pl:"1em",children:[Object(E.jsx)(Ve,{type:d,typeLabel:h,year:i,city:j}),Object(E.jsx)(qe,{type:d,typeLabel:h,year:i,city:j})]})]})]})};var Xe=function(){return Object(E.jsx)(Ue,{})};l.a.render(Object(E.jsx)(T,{children:Object(E.jsx)(G,{children:Object(E.jsx)(H,{children:Object(E.jsx)(Xe,{})})})}),document.getElementById("root"))}},[[781,1,2]]]);
//# sourceMappingURL=main.f7635d92.chunk.js.map